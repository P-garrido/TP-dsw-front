{"version":3,"names":["cov_7buzdepi","actualCoverage","s","core_1","require","http_1","user_1","rxjs_1","LogInService","constructor","http","f","baseUrl","token","user","User","sessionStorageKey","storedData","sessionStorage","getItem","b","JSON","parse","data","String","setUserData","setItem","stringify","getOne","pass","post","nombre_usuario","clave","pipe","catchError","handleError","error","status","alert","console","message","throwError","Error","tslib_1","__decorate","Injectable","providedIn","HttpClient","exports"],"sources":["C:\\Users\\Usuario\\repos(Desarrollo)\\TP-dsw-front\\src\\app\\log-in.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\r\nimport { User } from './models/user';\r\nimport { catchError, throwError } from 'rxjs';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LogInService {\r\n\r\n\r\n  constructor(private http: HttpClient) {\r\n\r\n    const storedData = sessionStorage.getItem(this.sessionStorageKey);\r\n    this.user = storedData ? JSON.parse(storedData).data : new User(-1, \"\", \"\", \"\", \"\", \"\", \"\", -1, \"\");\r\n    this.token = storedData ? JSON.parse(storedData).token : String;\r\n  }\r\n\r\n\r\n\r\n  readonly baseUrl = \"http://localhost:1234/login\";\r\n\r\n  token: any = \"\";\r\n  user: User = new User(-1, \"\", \"\", \"\", \"\", \"\", \"\", -1, \"\");\r\n\r\n\r\n  public sessionStorageKey = 'user_data';\r\n\r\n\r\n\r\n  setUserData(data: User) {\r\n    this.user = data;\r\n    // Almacenar datos en el almacenamiento local\r\n    sessionStorage.setItem(this.sessionStorageKey, JSON.stringify({ data, token: this.token }));\r\n  }\r\n\r\n\r\n\r\n  getOne(user: string, pass: number) {\r\n    return this.http.post<any>(this.baseUrl, {\r\n      nombre_usuario: user,\r\n      clave: pass\r\n    }).pipe(catchError(this.handleError))\r\n  }\r\n\r\n  private handleError(error: HttpErrorResponse) {\r\n    if (error.status === 404) {\r\n      alert('Nombre de usuario o contrasena incorrectos');\r\n    } else {\r\n      console.error('OcurriÃ³ un error inesperado:', error.message);\r\n    }\r\n\r\n    return throwError(() => new Error('Ocurrio un error'));\r\n  }\r\n}\r\n"],"mappings":"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"}